
{
  "entities": {
    "MaintenanceRequest": {
      "title": "MaintenanceRequest",
      "type": "object",
      "description": "Represents a maintenance request for a POS machine.",
      "properties": {
        "customerId": {
          "type": "string",
          "description": "The unique bkcode of the customer."
        },
        "posMachineId": {
          "type": "string",
          "description": "The ID of the POS machine document."
        },
        "customerName": {
          "type": "string"
        },
        "machineModel": {
          "type": "string"
        },
        "machineManufacturer": {
          "type": "string"
        },
        "createdAt": {
          "type": "string",
          "description": "Date and time the request was created.",
          "format": "date-time"
        },
        "status": {
          "type": "string",
          "description": "Current status of the request (e.g., 'Open', 'In Progress', 'Closed').",
          "enum": [
            "Open",
            "In Progress",
            "Closed",
            "Cancelled"
          ]
        },
        "priority": {
          "type": "string",
          "description": "Priority of the request (e.g., 'High', 'Medium', 'Low').",
          "enum": [
            "High",
            "Medium",
            "Low"
          ]
        },
        "technician": {
          "type": "string",
          "description": "Name of the assigned technician."
        },
        "notes": {
          "type": "string"
        },
        "complaint": {
          "type": "string",
          "description": "The initial complaint reported by the customer."
        },
        "actionTaken": {
          "type": "string",
          "description": "The procedure performed by the technician to fix the issue."
        }
      },
      "required": [
        "customerId",
        "posMachineId",
        "customerName",
        "createdAt",
        "status",
        "priority",
        "complaint"
      ]
    },
    "PosMachine": {
      "title": "PosMachine",
      "type": "object",
      "description": "Represents a single POS machine owned by a customer.",
      "properties": {
        "serialNumber": {
          "type": "string",
          "description": "The unique serial number of the terminal."
        },
        "posId": {
          "type": "string",
          "description": "The system-specific ID for the POS terminal."
        },
        "model": {
          "type": "string",
          "description": "The model of the machine, derived from settings."
        },
        "manufacturer": {
          "type": "string",
          "description": "The manufacturer of the machine, derived from settings."
        },
        "customerId": {
          "type": "string",
          "description": "The bkcode of the customer who owns this machine."
        },
        "isMain": {
          "type": "boolean",
          "description": "Indicates if this is the current main POS for the client."
        }
      },
      "required": [
        "serialNumber",
        "posId",
        "customerId"
      ]
    },
    "Customer": {
      "title": "Customer",
      "type": "object",
      "description": "Represents a customer entity.",
      "properties": {
        "bkcode": {
          "type": "string",
          "description": "Unique identifier for the customer, used as document ID."
        },
        "client_name": {
          "type": "string"
        },
        "supply_office": {
          "type": "string"
        },
        "operating_date": {
          "type": "string",
          "format": "date-time"
        },
        "address": {
          "type": "string"
        },
        "contact_person": {
          "type": "string"
        },
        "scanned_id_path": {
          "type": "string",
          "description": "Network path to the scanned ID."
        },
        "national_id": {
          "type": "string"
        },
        "dept": {
          "type": "string"
        },
        "telephone_1": {
          "type": "string"
        },
        "telephone_2": {
          "type": "string"
        },
        "has_gates": {
          "type": "boolean"
        },
        "bk_type": {
          "type": "string"
        },
        "notes": {
          "type": "string"
        },
        "papers_date": {
          "type": "string",
          "format": "date-time"
        }
      },
      "required": [
        "bkcode",
        "client_name",
        "address"
      ]
    },
    "SimCard": {
      "title": "SimCard",
      "type": "object",
      "description": "Represents a SIM card associated with a customer.",
      "properties": {
        "serialNumber": {
          "type": "string",
          "description": "Unique serial number for the SIM card."
        },
        "type": {
          "type": "string",
          "description": "The type of the SIM card (e.g., Vodafone, Orange)."
        },
        "customerId": {
          "type": "string",
          "description": "The bkcode of the customer who owns this SIM."
        }
      },
      "required": [
        "serialNumber",
        "type",
        "customerId"
      ]
    },
    "User": {
      "title": "User",
      "type": "object",
      "description": "Represents a user of the maintenance management system.",
      "properties": {
        "uid": {
          "type": "string",
          "description": "Unique identifier for the user (from Firebase Auth)."
        },
        "email": {
            "type": "string",
            "format": "email",
            "description": "The user's email address."
        },
        "displayName": {
          "type": "string",
          "description": "Full name of the user."
        },
        "role": {
          "type": "string",
          "description": "User's role in the system (e.g., 'Technician', 'Manager', 'Admin')."
        }
      },
      "required": [
        "uid",
        "email"
      ]
    },
    "MachineParameter": {
      "title": "MachineParameter",
      "type": "object",
      "description": "Defines the structure for machine parameter rules used for auto-lookup.",
      "properties": {
        "prefix": {
          "type": "string"
        },
        "model": {
          "type": "string"
        },
        "manufacturer": {
          "type": "string"
        }
      },
      "required": [
        "prefix",
        "model",
        "manufacturer"
      ]
    }
  },
  "auth": {
    "providers": [
      "password",
      "anonymous"
    ]
  },
  "firestore": {
    "/users/{userId}": {
      "schema": {
        "$ref": "#/entities/User"
      },
      "description": "Stores user profiles."
    },
    "/customers/{bkcode}": {
      "schema": {
        "$ref": "#/entities/Customer"
      },
      "description": "Stores customer information, using bkcode as the unique ID."
    },
    "/posMachines/{machineId}": {
      "schema": {
        "$ref": "#/entities/PosMachine"
      },
      "description": "Stores all POS machines. Each machine is linked to a customer by customerId (bkcode)."
    },
    "/simCards/{simCardId}": {
      "schema": {
        "$ref": "#/entities/SimCard"
      },
      "description": "Stores all SIM cards. Each card is linked to a customer by customerId (bkcode)."
    },
    "/maintenanceRequests/{requestId}": {
      "schema": {
        "$ref": "#/entities/MaintenanceRequest"
      },
      "description": "Stores all maintenance requests."
    },
    "/machineParameters/{parameterId}": {
      "schema": {
        "$ref": "#/entities/MachineParameter"
      },
      "description": "Stores rules for identifying machine models and manufacturers from serial number prefixes."
    }
  }
}
